<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zbf.user.mapper.UserRoleMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="mapVo" type="com.zbf.user.entity.User">
        <id column="id" property="id" />
        <result column="version" property="version" />
        <result column="userName" property="userName" />
        <result column="loginName" property="loginName" />
        <result column="passWord" property="passWord" />
        <result column="tel" property="tel" />
        <result column="buMen" property="buMen" />
        <result column="salt" property="salt" />
        <result column="createTime" property="createTime" />
        <result column="updateTime" property="updateTime" />
        <result column="email" property="email" />
        <result column="sex" property="sex" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, version, userName, loginName, passWord, tel, buMen, salt, createTime, updateTime, email,sex
    </sql>



    <select id="selects" resultMap="mapVo">
select u.*, r.name,r.miaoshu,r.role_code,r.id from base_user u INNER join base_user_role ur on u.id=ur.userId
INNER JOIN base_role r on ur.roleId=r.id

    <where>
        <if test="user.userName!=null and user.userName!=''">
            and u.userName like concat('%',#{user.userName},'%')
        </if>
        <if test="user.loginName!=null and user.loginName!=''">
            and u.loginName like concat('%',#{user.loginName},'%')
        </if>

    </where>
        GROUP BY u.id


    </select>

</mapper>
